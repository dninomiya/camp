<div class="container">
  <ais-instantsearch [config]="algoliaConfig" class="list">
    <app-search-lesson-input></app-search-lesson-input>

    <ais-configure [searchParameters]="searchParameters"> </ais-configure>
    <ais-hits [transformItems]="buildLists">
      <ng-template let-hits="hits" let-results="results">
        <table mat-table matSort [dataSource]="hits">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>名前</th>
            <td mat-cell *matCellDef="let element">
              {{ element.name }} - {{ element.email }}
            </td>
          </ng-container>

          <ng-container matColumnDef="plan">
            <th mat-header-cell *matHeaderCellDef>プラン</th>
            <td mat-cell *matCellDef="let element">
              {{ element.plan | plan }}
            </td>
          </ng-container>

          <ng-container matColumnDef="createdAt">
            <th mat-header-cell *matHeaderCellDef>日付</th>
            <td mat-cell *matCellDef="let element">
              {{ element.createdAt | date: 'yyyy年MM月dd日' }}
            </td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element">
              <button mat-icon-button [matMenuTriggerFor]="menuRef">
                <mat-icon class="mat-18">more_vert</mat-icon>
              </button>

              <mat-menu #menuRef="matMenu">
                <button mat-menu-item>
                  <mat-icon class="mat-18">edit</mat-icon>
                  <span>コメント</span>
                </button>
              </mat-menu>
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>

        <!-- <mat-paginator
          *ngIf="channel$ | async as channel"
          [length]="channel.statistics.lessonCount"
          [pageSize]="searchParameters.hitsPerPage"
          [pageSizeOptions]="[10, 30, 50]"
          showFirstLastButtons
          (page)="changePager($event)"
        ></mat-paginator> -->
      </ng-template>
    </ais-hits>
  </ais-instantsearch>
</div>
